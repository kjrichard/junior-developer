<div class="row">
    <div class="col-md-12">
     <div class="card">
       <div class="card-header">
         <div class="row">
           <h4 class="card-title col-10">Usuarios Registrados En El Sistema</h4>
           <div class="d-block align-self-end col-2">
             <button  type="button" class="btn btn-danger" (click)="open(content)">
               <i class="fa fa-plus text-white fa-lg"></i>
               <span class="text-white"> NUEVO</span>
             </button>
           </div>
         </div>
       </div>
       <div class="card-body">
         <div class="">
           <table class="table table-striped">
             <thead>
               <tr>
                 <th scope="col">Nombres</th>
                 <th scope="col">Primer apellido</th>
                 <th scope="col">Segundo apellido</th>
                 <th scope="col">Telefono</th>
                 <th scope="col">Rol</th>
                 <th scope="col">Usuario</th>
                 <th scope="col" class="text-center w200">Opciones</th>
               </tr>
             </thead>
             <tbody >
               <tr *ngFor="let item of users.users  ">
                 <td>{{ item.name }}</td>
                 <td>{{ item.surname }}</td>
                 <td>{{ item.lastSurname }}</td>
                 <td>{{ item.phone }}</td>
                 <td>{{ item.role.name }}</td>
                 <td>{{ item.username}}</td>
                 <td class="w200">
                    <div class="d-flex justify-content-center">
                      <button
                      type="button"
                      class="btn btn-outline-danger float-right btn-round mr-3 btn-sm"
                      (click)="openModal( modalUpdate, item )"
                    >
                      <i class="fa fa-pencil fa-sm"></i>
                    </button>
                    <button
                      type="button"
                      class="btn btn-outline-danger float-right btn-round btn-sm"
                      (click)="deleteUser( item.id )"
                    >
                      <i class="fa fa-trash fa-sm"></i>
                    </button>
                   </div> 
                 </td>
               </tr>
             </tbody>
           </table>
         </div>
       </div>
     </div>
    </div>
   </div>

<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title">REGISTRAR USUARIO</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="newUserForm" class="mb-5">
          <div class="row">
            <div class="col-md-6 py-2">
               <label class="form-label ">Nombres Completos*</label>
               <input type="text" 
               class="form-control"  
               formControlName="name" 
               placeholder="Ingresa el nombre"
               >
               <small class="bg-secondary text-light mt-1 px-2 py-1 rounded" 
               *ngIf="(uf.name.dirty || uf.name.touched) && uf.name.errors && Submitted">
               </small>
           </div>

           <div class="col-md-6 py-2">
            <label class="form-label ">Primer Apellidos*</label>
            <input type="text" 
            class="form-control"  
            formControlName="surname" 
            placeholder="Ingresa el usuario"
            >
            <small class="bg-secondary text-light mt-1 px-2 py-1 rounded" 
            *ngIf="(uf.surname.dirty || uf.surname.touched) && uf.surname.errors && Submitted">
            </small>
        </div>

        <div class="col-md-6 py-2">
               <label class="form-label ">segundo apellido *</label>
               <input type="text" 
               class="form-control"  
               formControlName="lastSurname" 
               placeholder="Segundo apellido"
               >
               <small class="bg-secondary text-light mt-1 px-2 py-1 rounded" 
               *ngIf="(uf.lastSurname.dirty || uf.lastSurname.touched) && uf.lastSurname.errors && Submitted">
               </small>
           </div>

        <div class="col-md-6 py-2">
            <label class="form-label ">Telefono*</label>
            <input type="number" 
            class="form-control"  
            formControlName="phone" 
            placeholder="Telefono"
            >
            <small class="bg-secondary text-light mt-1 px-2 py-1 rounded" 
            *ngIf="(uf.phone.dirty || uf.phone.touched) && uf.phone.errors && Submitted">
            </small>
        </div>

        <div class="col-md-6 py-2">
               <label class="form-label ">Contrase単a*</label>
               <input type="password" 
               class="form-control"  
               formControlName="password" 
               placeholder="Contrase単a">
               <small class="bg-secondary text-light mt-1 px-2 py-1 rounded" 
               *ngIf="(uf.password.dirty || uf.password.touched) && uf.password.errors && Submitted">
               </small>
           </div>
       
        
           </div>
           <hr>
            <div class=" d-flex justify-content-center">
            <button type="button" class="btn btn-danger w-50" (click)="newUser()" [disabled]="newUserForm.invalid" >
              <span>Guardar</span>
            </button>
            </div>

        </form>
      </div>
</ng-template>

<ng-template #modalUpdate let-modal>
  <div class="modal-header">
      <h4 class="modal-title">ACTUALIZAR USUARIO</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form [formGroup]="newUserForm" class="mb-5">
        <div class="row">
          <div class="col-md-6 py-2">
             <label class="form-label ">Nombres Completos*</label>
             <input type="text" 
             class="form-control"  
             formControlName="name" 
             placeholder="Ingresa el nombre"
             >
             <small class="bg-secondary text-light mt-1 px-2 py-1 rounded" 
             *ngIf="(uf.name.dirty || uf.name.touched) && uf.name.errors && Submitted">
             </small>
         </div>

         <div class="col-md-6 py-2">
          <label class="form-label ">Primer Apellidos*</label>
          <input type="text" 
          class="form-control"  
          formControlName="surname" 
          placeholder="Ingresa el usuario"
          >
          <small class="bg-secondary text-light mt-1 px-2 py-1 rounded" 
          *ngIf="(uf.surname.dirty || uf.surname.touched) && uf.surname.errors && Submitted">
          </small>
      </div>

      <div class="col-md-6 py-2">
             <label class="form-label ">segundo apellido *</label>
             <input type="text" 
             class="form-control"  
             formControlName="lastSurname" 
             placeholder="Segundo apellido"
             >
             <small class="bg-secondary text-light mt-1 px-2 py-1 rounded" 
             *ngIf="(uf.lastSurname.dirty || uf.lastSurname.touched) && uf.lastSurname.errors && Submitted">
             </small>
         </div>

      <div class="col-md-6 py-2">
          <label class="form-label ">Telefono*</label>
          <input type="number" 
          class="form-control"  
          formControlName="phone" 
          placeholder="Telefono"
          >
          <small class="bg-secondary text-light mt-1 px-2 py-1 rounded" 
          *ngIf="(uf.phone.dirty || uf.phone.touched) && uf.phone.errors && Submitted">
          </small>
      </div>

      <div class="col-md-6 py-2">
             <label class="form-label ">Contrase単a*</label>
             <input type="password" 
             class="form-control"  
             formControlName="password" 
             placeholder="Contrase単a">
             <small class="bg-secondary text-light mt-1 px-2 py-1 rounded" 
             *ngIf="(uf.password.dirty || uf.password.touched) && uf.password.errors && Submitted">
             </small>
         </div>
     
      
         </div>
         <hr>
          <div class=" d-flex justify-content-center">
          <button type="button" class="btn btn-danger w-50" (click)="updateUser()" [disabled]="newUserForm.invalid" >
            <span>Guardar</span>
          </button>
          </div>

      </form>
    </div>
</ng-template>

